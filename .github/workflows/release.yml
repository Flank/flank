name: RELEASE

# Run when push on master or create tag with version [v*]
on:
  push:
    branches:
      - '#892-release_on_github_actions' #TODO change to master
    tags: v*

jobs:
  release:
    runs-on: macos-latest
    
    steps:
    - uses: actions/checkout@v2
  
    - name: Get tag
      if: ${{ $GITHUB_REF == "refs/tags/*" }}
      id: tag
      uses: dawidd6/action-get-tag@v1
    
    - name: Set Tag variable
      run: |
          if [ $GITHUB_REF == "refs/tags/*" ]; 
            then echo "::set-env name=release_tag::${{steps.tag.outputs.tag}}"; 
            else echo "::set-env name=release_tag::flank_snapshot"; 
          fi;     

    - name: TEMPORARY print tag   
      run: echo $release_tag   
    
